# AI生成规范

## 1. 功能开发规范

### 1.1 功能范围控制
- **严格按需求开发**：不要添加需求之外的新功能或新逻辑，避免不必要的复杂度提升
- **示例**：如需求只是修改攻击系统，不要额外添加经验值系统、升级系统等
- **原则**：在原有功能基础上进行生成或修改，保持项目简洁性

### 1.2 代码质量规范
- **命名规范**：使用有意义的变量名、函数名和类名
  - 变量：`camelCase`（如 `playerHealth`）
  - 函数：`camelCase`（如 `calculateDamage()`）
  - 类：`PascalCase`（如 `EnemySystem`）
  - 常量：`UPPER_SNAKE_CASE`（如 `MAX_HEALTH`）
- **函数拆分**：单个函数不超过50行，职责单一
- **注释规范**：关键逻辑必须添加中文注释

### 1.3 项目架构规范
- **目录结构遵循**：
  - 场景相关代码 → `src/js/scenes/`
  - 系统相关代码 → `src/js/systems/`
  - 角色类代码 → `src/js/classes/`
  - 配置文件 → `src/js/data/` 或 `src/js/config/`
  - UI组件 → `src/js/ui/`
- **模块化原则**：每个文件职责单一，避免巨型文件

## 2. 资源管理规范

### 2.1 新资源处理
- **AI提示词生成**：涉及新场景、新物品、新角色等资源时，必须生成对应的AI提示词
- **文档管理**：将AI提示词添加到 `AI提示词/` 文件夹对应的文档中
- **资源命名**：使用描述性名称，避免 `image1.png`、`sound2.wav` 等无意义命名

### 2.2 AI提示词规范
- **风格一致性**：符合游戏背景、剧情、当前场景风格
- **尺寸规范**：
  - 图片：根据代码中UI元素大小给出合适尺寸
  - 音频：根据类型给出具体时长（背景音乐2-5分钟，音效0.5-2秒）
- **格式要求**：使用Markdown格式，包含详细描述和技术参数

### 2.3 资源路径规范
- **项目资源路径**：`/assets/` 目录已正确配置为 `publicDir`
- **修复原则**：修复BUG时不要质疑资源路径配置，专注于代码逻辑问题

## 3. 技术规范

### 3.1 游戏基础参数
- **游戏尺寸**：1280 × 720 像素
- **帧率**：60 FPS
- **坐标系**：Phaser 3 标准坐标系（左上角为原点）

### 3.2 配置文件规范
- **避免硬编码**：场景尺寸、物理体大小、动画参数等应在配置文件中定义
- **配置文件位置**：
  - 动画配置：`src/js/data/AnimationConfig.js`
  - 音频配置：`src/js/config/AudioConfig.js`
  - 游戏配置：`src/js/config/GameConfig.js`
- **引用方式**：JS文件中通过 `import` 引用配置文件中的值

### 3.3 性能优化规范
- **资源预加载**：在 `preload()` 方法中加载所有必需资源
- **对象池**：频繁创建销毁的对象使用对象池模式
- **事件清理**：组件销毁时必须清理事件监听器
- **内存管理**：及时销毁不再使用的图形对象和精灵

## 4. 调试与测试规范

### 4.1 调试功能
- **调试模式**：保留调试开关，便于开发时查看碰撞框、攻击范围等
- **日志规范**：使用统一的Logger系统，避免直接使用 `console.log`
- **错误处理**：关键功能必须添加错误处理和降级方案

### 4.2 测试要求
- **功能测试**：新功能开发完成后必须进行基础功能测试
- **兼容性测试**：确保新代码不影响现有功能
- **性能测试**：关注帧率和内存使用情况

## 5. 文档维护规范

### 5.1 代码文档
- **文件头注释**：每个文件开头说明文件用途和主要功能
- **函数文档**：复杂函数使用JSDoc格式注释
- **配置说明**：配置文件中的参数必须有详细注释

### 5.2 项目文档
- **更新及时性**：代码变更后及时更新相关文档
- **版本记录**：重要功能变更需要在项目文档中记录
- **使用指南**：为新功能编写使用指南和示例

## 6. 版本控制规范

### 6.1 提交规范
- **提交信息**：使用中文，格式为 `[类型] 简短描述`
  - `[新增]`、`[修复]`、`[优化]`、`[重构]`、`[文档]`
- **提交频率**：功能完成一个小模块就提交一次
- **文件组织**：避免一次提交过多不相关的文件变更

### 6.2 分支管理
- **主分支**：`main` 分支保持稳定可运行状态
- **功能分支**：大功能开发使用独立分支
- **测试验证**：合并前确保功能正常运行
